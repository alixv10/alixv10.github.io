<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Conservation of Liquid Task</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 20px;
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(135deg, #87CEEB 0%, #98FB98 100%);
            min-height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
            max-width: 700px;
            width: 100%;
        }

        h1 {
            color: #2C3E50;
            font-size: 2.5rem;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .task-area {
            position: relative;
            height: 350px;
            background: #F0F8FF;
            border: 3px solid #4169E1;
            border-radius: 15px;
            margin: 30px 0;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding: 20px;
            overflow: hidden;
        }

        .glasses-container {
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            width: 100%;
            height: 100%;
        }

        .glass {
            position: relative;
            transition: all 1s ease;
        }

        .glass-wide {
            width: 80px;
            height: 120px;
        }

        .glass-tall {
            width: 50px;
            height: 180px;
            opacity: 0;
            transform: translateY(20px);
        }

        .glass-tall.show {
            opacity: 1;
            transform: translateY(0);
        }

        .water {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to bottom, #87CEEB, #4682B4);
            border-radius: 0 0 8px 8px;
            transition: all 1.5s ease;
        }

        .water-wide {
            height: 60px;
        }

        .water-tall {
            height: 120px;
        }

        .instructions {
            font-size: 1.2rem;
            color: #34495E;
            margin: 20px 0;
            line-height: 1.6;
            min-height: 60px;
        }

        .question-section {
            background: #FFF8DC;
            border: 2px solid #DAA520;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            display: none;
        }

        .question-text {
            font-size: 1.3rem;
            color: #B8860B;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .answer-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .answer-button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 1.1rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .answer-button:hover {
            background: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .answer-button.correct {
            background: #28a745;
        }

        .answer-button.incorrect {
            background: #dc3545;
        }

        .start-button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .start-button:hover {
            background: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .reset-button {
            background: #FF6B6B;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
            margin-top: 20px;
            display: none;
        }

        .reset-button:hover {
            background: #FF5252;
            transform: translateY(-2px);
        }

        .result-message {
            background: #E6F3FF;
            border: 2px solid #87CEEB;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            font-size: 1.1rem;
            color: #2C3E50;
            line-height: 1.6;
            display: none;
        }

        .explanation {
            background: #E6F3FF;
            border: 2px solid #87CEEB;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            font-size: 1rem;
            color: #2C3E50;
            line-height: 1.6;
            display: none;
        }

        .pouring-animation {
            position: absolute;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 100px;
            background: linear-gradient(to bottom, transparent 0%, #87CEEB 20%, #4682B4 100%);
            border-radius: 10px;
            opacity: 0;
            animation: pour 2s ease-in-out;
        }

        @keyframes pour {
            0% { opacity: 0; height: 0; }
            20% { opacity: 1; height: 100px; }
            80% { opacity: 1; height: 100px; }
            100% { opacity: 0; height: 0; }
        }

        @keyframes slideIn {
            from { 
                transform: translateX(100px) translateY(20px);
                opacity: 0;
            }
            to { 
                transform: translateX(0) translateY(0);
                opacity: 1;
            }
        }

        .slide-in {
            animation: slideIn 1s ease-out;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <main class="container">
   <h1 id="task-title">Conservation of Liquid Task</h1>
   <div class="instructions" id="instructions">
    Look at these two glasses of water. They contain exactly the same amount of water.
   </div>
   <div class="task-area" id="task-area">
    <div class="glasses-container">
     <div class="glass glass-wide" id="glass1">
      <svg viewbox="0 0 80 120" xmlns="http://www.w3.org/2000/svg"><!-- Glass shadow --> <rect x="3" y="3" width="74" height="114" fill="rgba(0,0,0,0.1)" rx="8" /> <!-- Glass body --> <rect x="0" y="0" width="74" height="114" fill="rgba(255,255,255,0.3)" stroke="#B0C4DE" stroke-width="2" rx="8" /> <!-- Glass rim --> <rect x="0" y="0" width="74" height="8" fill="rgba(255,255,255,0.6)" stroke="#B0C4DE" stroke-width="2" rx="8" /> <!-- Glass highlight --> <rect x="5" y="5" width="8" height="104" fill="rgba(255,255,255,0.4)" rx="4" />
      </svg>
      <div class="water water-wide" id="water1"></div>
     </div>
     <div class="glass glass-wide" id="glass2">
      <svg viewbox="0 0 80 120" xmlns="http://www.w3.org/2000/svg"><!-- Glass shadow --> <rect x="3" y="3" width="74" height="114" fill="rgba(0,0,0,0.1)" rx="8" /> <!-- Glass body --> <rect x="0" y="0" width="74" height="114" fill="rgba(255,255,255,0.3)" stroke="#B0C4DE" stroke-width="2" rx="8" /> <!-- Glass rim --> <rect x="0" y="0" width="74" height="8" fill="rgba(255,255,255,0.6)" stroke="#B0C4DE" stroke-width="2" rx="8" /> <!-- Glass highlight --> <rect x="5" y="5" width="8" height="104" fill="rgba(255,255,255,0.4)" rx="4" />
      </svg>
      <div class="water water-wide" id="water2"></div>
     </div>
     <div class="glass glass-tall" id="glass3">
      <svg viewbox="0 0 50 180" xmlns="http://www.w3.org/2000/svg"><!-- Glass shadow --> <rect x="3" y="3" width="44" height="174" fill="rgba(0,0,0,0.1)" rx="6" /> <!-- Glass body --> <rect x="0" y="0" width="44" height="174" fill="rgba(255,255,255,0.3)" stroke="#B0C4DE" stroke-width="2" rx="6" /> <!-- Glass rim --> <rect x="0" y="0" width="44" height="8" fill="rgba(255,255,255,0.6)" stroke="#B0C4DE" stroke-width="2" rx="6" /> <!-- Glass highlight --> <rect x="3" y="5" width="6" height="164" fill="rgba(255,255,255,0.4)" rx="3" />
      </svg>
      <div class="water" id="water3" style="height: 0;"></div>
     </div>
    </div>
    <div class="pouring-animation" id="pouring" style="display: none;"></div>
   </div><button class="start-button" id="start-button">Start Demonstration</button>
   <div class="question-section" id="question-section">
    <div class="question-text" id="question-text">
     Which glass has more water now?
    </div>
    <div class="answer-buttons"><button class="answer-button" id="left-more">Left glass has more</button> <button class="answer-button" id="same-amount">They have the same amount</button> <button class="answer-button" id="right-more">Right glass has more</button>
    </div>
   </div>
   <div class="result-message" id="result-message"></div>
   <div class="explanation" id="explanation"><strong>About Conservation of Liquid:</strong><br>
     Children in the preoperational stage (ages 2-7) often struggle with conservation tasks. They focus on one aspect of the transformation (like height) and ignore others (like width). This demonstrates that logical thinking develops gradually, and children must learn that quantity remains constant despite changes in appearance.
   </div><button class="reset-button" id="reset-button">Try Again</button>
  </main>
  <script>
        const defaultConfig = {
            task_title: "Conservation of Liquid Task",
            initial_instruction: "Look at these two glasses of water. They contain exactly the same amount of water.",
            question_text: "Which glass has more water now?",
            explanation_text: "Children in the preoperational stage (ages 2-7) often struggle with conservation tasks. They focus on one aspect of the transformation (like height) and ignore others (like width). This demonstrates that logical thinking develops gradually, and children must learn that quantity remains constant despite changes in appearance.",
            background_color: "#87CEEB",
            container_color: "#FFFFFF",
            text_color: "#2C3E50",
            button_color: "#4CAF50",
            font_family: "Comic Sans MS",
            font_size: 16
        };

        let taskStarted = false;
        let questionShown = false;

        const elements = {
            taskTitle: document.getElementById('task-title'),
            instructions: document.getElementById('instructions'),
            taskArea: document.getElementById('task-area'),
            glass1: document.getElementById('glass1'),
            glass2: document.getElementById('glass2'),
            glass3: document.getElementById('glass3'),
            water1: document.getElementById('water1'),
            water2: document.getElementById('water2'),
            water3: document.getElementById('water3'),
            pouring: document.getElementById('pouring'),
            startButton: document.getElementById('start-button'),
            questionSection: document.getElementById('question-section'),
            questionText: document.getElementById('question-text'),
            leftMore: document.getElementById('left-more'),
            sameAmount: document.getElementById('same-amount'),
            rightMore: document.getElementById('right-more'),
            resultMessage: document.getElementById('result-message'),
            explanation: document.getElementById('explanation'),
            resetButton: document.getElementById('reset-button')
        };

        function startDemonstration() {
            if (taskStarted) return;
            
            taskStarted = true;
            elements.startButton.style.display = 'none';
            elements.instructions.textContent = 'Watch carefully as we pour the water from one glass into a different shaped glass...';
            
            // Wait 2 seconds, then start pouring animation
            setTimeout(() => {
                // Show pouring animation
                elements.pouring.style.display = 'block';
                
                // Start water transformation
                setTimeout(() => {
                    // Remove water from glass 2
                    elements.water2.style.height = '0px';
                    
                    // Show tall glass and fill it
                    elements.glass3.classList.add('show', 'slide-in');
                    
                    setTimeout(() => {
                        elements.water3.style.height = '120px';
                        elements.water3.classList.add('water-tall');
                    }, 500);
                    
                }, 500);
                
                // Hide pouring animation and show question
                setTimeout(() => {
                    elements.pouring.style.display = 'none';
                    showQuestion();
                }, 2500);
                
            }, 2000);
        }

        function showQuestion() {
            const questionText = window.elementSdk?.config?.question_text || defaultConfig.question_text;
            elements.questionText.textContent = questionText;
            elements.instructions.textContent = 'Now compare the two glasses with water. Think carefully!';
            elements.questionSection.style.display = 'block';
            questionShown = true;
        }

        function handleAnswer(answer) {
            if (!questionShown) return;
            
            // Disable all buttons
            const buttons = [elements.leftMore, elements.sameAmount, elements.rightMore];
            buttons.forEach(btn => btn.disabled = true);
            
            let resultText = '';
            let isCorrect = false;
            
            if (answer === 'same') {
                isCorrect = true;
                elements.sameAmount.classList.add('correct');
                resultText = 'ðŸŽ‰ Correct! Both glasses contain exactly the same amount of water. The water just looks different because the glasses have different shapes. Great logical thinking!';
            } else if (answer === 'left') {
                elements.leftMore.classList.add('incorrect');
                elements.sameAmount.classList.add('correct');
                resultText = 'The left glass appears to have more because it\'s wider, but both glasses actually contain the same amount of water. The shape of the container doesn\'t change the quantity!';
            } else {
                elements.rightMore.classList.add('incorrect');
                elements.sameAmount.classList.add('correct');
                resultText = 'The right glass appears to have more because the water level is higher, but both glasses actually contain the same amount of water. The shape of the container doesn\'t change the quantity!';
            }
            
            elements.resultMessage.textContent = resultText;
            elements.resultMessage.style.display = 'block';
            
            setTimeout(() => {
                showExplanation();
            }, 3000);
        }

        function showExplanation() {
            const explanationText = window.elementSdk?.config?.explanation_text || defaultConfig.explanation_text;
            elements.explanation.innerHTML = `<strong>About Conservation of Liquid:</strong><br>${explanationText}`;
            elements.explanation.style.display = 'block';
            elements.resetButton.style.display = 'inline-block';
        }

        function resetTask() {
            taskStarted = false;
            questionShown = false;
            
            // Reset all elements
            elements.startButton.style.display = 'inline-block';
            elements.questionSection.style.display = 'none';
            elements.resultMessage.style.display = 'none';
            elements.explanation.style.display = 'none';
            elements.resetButton.style.display = 'none';
            elements.pouring.style.display = 'none';
            
            // Reset glasses and water
            elements.glass3.classList.remove('show', 'slide-in');
            elements.water1.style.height = '60px';
            elements.water2.style.height = '60px';
            elements.water3.style.height = '0px';
            elements.water3.classList.remove('water-tall');
            
            // Reset buttons
            const buttons = [elements.leftMore, elements.sameAmount, elements.rightMore];
            buttons.forEach(btn => {
                btn.disabled = false;
                btn.classList.remove('correct', 'incorrect');
            });
            
            const initialInstruction = window.elementSdk?.config?.initial_instruction || defaultConfig.initial_instruction;
            elements.instructions.textContent = initialInstruction;
        }

        // Event listeners
        elements.startButton.addEventListener('click', startDemonstration);
        elements.leftMore.addEventListener('click', () => handleAnswer('left'));
        elements.sameAmount.addEventListener('click', () => handleAnswer('same'));
        elements.rightMore.addEventListener('click', () => handleAnswer('right'));
        elements.resetButton.addEventListener('click', resetTask);

        // Element SDK implementation
        async function onConfigChange(config) {
            const title = config.task_title || defaultConfig.task_title;
            const initialInstruction = config.initial_instruction || defaultConfig.initial_instruction;
            const customFont = config.font_family || defaultConfig.font_family;
            const baseSize = config.font_size || defaultConfig.font_size;
            const backgroundColor = config.background_color || defaultConfig.background_color;
            const containerColor = config.container_color || defaultConfig.container_color;
            const textColor = config.text_color || defaultConfig.text_color;
            const buttonColor = config.button_color || defaultConfig.button_color;
            
            elements.taskTitle.textContent = title;
            if (!taskStarted) {
                elements.instructions.textContent = initialInstruction;
            }
            
            // Apply font
            const baseFontStack = 'cursive, sans-serif';
            document.body.style.fontFamily = `${customFont}, ${baseFontStack}`;
            
            // Apply font sizes
            elements.taskTitle.style.fontSize = `${baseSize * 2.5}px`;
            elements.instructions.style.fontSize = `${baseSize * 1.2}px`;
            elements.questionText.style.fontSize = `${baseSize * 1.3}px`;
            
            // Apply colors
            document.body.style.background = `linear-gradient(135deg, ${backgroundColor} 0%, #98FB98 100%)`;
            document.querySelector('.container').style.backgroundColor = containerColor;
            elements.taskTitle.style.color = textColor;
            elements.instructions.style.color = textColor;
            elements.startButton.style.backgroundColor = buttonColor;
            
            const answerButtons = document.querySelectorAll('.answer-button');
            answerButtons.forEach(btn => {
                if (!btn.classList.contains('correct') && !btn.classList.contains('incorrect')) {
                    btn.style.backgroundColor = buttonColor;
                }
            });
        }

        function mapToCapabilities(config) {
            return {
                recolorables: [
                    {
                        get: () => config.background_color || defaultConfig.background_color,
                        set: (value) => {
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ background_color: value });
                            }
                        }
                    },
                    {
                        get: () => config.container_color || defaultConfig.container_color,
                        set: (value) => {
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ container_color: value });
                            }
                        }
                    },
                    {
                        get: () => config.text_color || defaultConfig.text_color,
                        set: (value) => {
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ text_color: value });
                            }
                        }
                    },
                    {
                        get: () => config.button_color || defaultConfig.button_color,
                        set: (value) => {
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ button_color: value });
                            }
                        }
                    }
                ],
                borderables: [],
                fontEditable: {
                    get: () => config.font_family || defaultConfig.font_family,
                    set: (value) => {
                        if (window.elementSdk) {
                            window.elementSdk.setConfig({ font_family: value });
                        }
                    }
                },
                fontSizeable: {
                    get: () => config.font_size || defaultConfig.font_size,
                    set: (value) => {
                        if (window.elementSdk) {
                            window.elementSdk.setConfig({ font_size: value });
                        }
                    }
                }
            };
        }

        function mapToEditPanelValues(config) {
            return new Map([
                ["task_title", config.task_title || defaultConfig.task_title],
                ["initial_instruction", config.initial_instruction || defaultConfig.initial_instruction],
                ["question_text", config.question_text || defaultConfig.question_text],
                ["explanation_text", config.explanation_text || defaultConfig.explanation_text]
            ]);
        }

        // Initialize Element SDK
        if (window.elementSdk) {
            window.elementSdk.init({
                defaultConfig,
                onConfigChange,
                mapToCapabilities,
                mapToEditPanelValues
            });
        }
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'997e32ce510b605e',t:'MTc2MjAyOTUzNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
